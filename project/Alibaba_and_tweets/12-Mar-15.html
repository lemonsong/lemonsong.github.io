<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Relation between Alibaba stock price and tweets</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- In-document CSS -->
  </head>

 <style>
    body{margin: 20px auto;
    background: url(/img/cream_dust.png);}
    h1{color: #1f77b4;}
    #back
        {
        margin-left:100px;
        }
    #cloudinfo{
        margin-right:100px;
        color:#7f7f7f;
        }
 </style>
 <body>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="/js/d3.layout.cloud.js"></script>

    <ul class="nav nav-pills">
        <li><a href="index.html">About</a></li>
        <li><a href="analysis.html">Twitter Analysis</a></li>
        <li class="active"><a href="tweets_cloud.html">Tweets Analysis</a></li>
        <li><a href="trend.html">Trend Analysis</a></li>
    </ul>
    
    <script type="text/javascript" src="js/jquery-1.8.3.min.js" charset="UTF-8"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <div>
        <h1 class="text-center"><strong>Word Could of Tweets about Alibaba </strong><small>12-Mar-15</small></h1>
        <div id="back">
            <a x=20 class="text-right" href="trend.html"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>BACK</a>
        </div>
        <div id="cloudinfo">
            <p class="text-right">Positive: 2.76  Negative: -0.24  Stock Price: 81.92</p>
        </div>
    </div>
    <div id="cloud">
        <script>
        var margin = {top: 10, right: 220, bottom: 20, left: 220},
        width = 1460 - margin.left - margin.right,
        height = 550 - margin.top - margin.bottom;
    
        var leaderScale = d3.scale.linear().range([20,60]);
        var fill = d3.scale.category20();
        d3.csv("data/29-Jan-15.csv",function(data){
            var leaders = data
                .filter(function(d) { return +d.G >0;})
                .map(function(d) {return {text: d.Name, size: +d.G}; })
                .sort(function(a,b) { return d3.descending(a.size, b.size);})
                .slice(0,100);
            leaderScale.domain([
                d3.min(leaders, function(d) { return d.size; }),
                d3.max(leaders, function(d) { return d.size; })
            ]);
            d3.layout.cloud().size([width, height])
              .words(leaders)
              .padding(1)
              .rotate(function() { return ~~(Math.random() * 2) * 90; })
              .font("Impact")
              .fontSize(function(d) { return leaderScale(d.size); })
              .on("end", drawCloud)
              .start();
          });
        function drawCloud(words) {
        d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
          .append("g")
            .attr("transform", "translate("+(width/2)+","+(height/2)+")")
          .selectAll("text")
            .data(words)
          .enter().append("text")
            .style("font-size", function(d) { return d.size + "px"; })
            .style("font-family", "Impact")
            .style("fill", function(d, i) { return fill(i); })
            .attr("text-anchor", "middle")
            .attr("transform", function(d) {
              return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
            })
            .text(function(d) { return d.text; });
        }
      </script>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

  </body>
  
</html>